# ü§ñ OmnisIA Trainer Web - Guia de Configura√ß√£o e Instala√ß√£o

## üìã Vis√£o Geral

O **OmnisIA Trainer Web** √© uma aplica√ß√£o completa para treinamento e processamento de IA com foco em:

-   **Upload e Processamento de Arquivos**: PDFs, imagens, √°udios e v√≠deos
-   **OCR (Reconhecimento √ìptico de Caracteres)**: Extra√ß√£o de texto de documentos e imagens
-   **STT (Speech-to-Text)**: Transcri√ß√£o de √°udios e v√≠deos usando Whisper
-   **Treinamento LoRA**: Fine-tuning de modelos de linguagem
-   **Sistema de Chat**: Chat inteligente com contexto baseado em embeddings
-   **Interface Web**: Frontend em Streamlit com dashboard completo

## üèóÔ∏è Arquitetura do Sistema

```
OmnisIA Trainer Web/
‚îú‚îÄ‚îÄ Backend (FastAPI)
‚îÇ   ‚îú‚îÄ‚îÄ API REST para processamento
‚îÇ   ‚îú‚îÄ‚îÄ Servi√ßos de IA (OCR, STT, LoRA)
‚îÇ   ‚îú‚îÄ‚îÄ Sistema de embeddings
‚îÇ   ‚îî‚îÄ‚îÄ Gerenciamento de arquivos
‚îú‚îÄ‚îÄ Frontend (Streamlit)
‚îÇ   ‚îú‚îÄ‚îÄ Interface web interativa
‚îÇ   ‚îú‚îÄ‚îÄ Dashboard de monitoramento
‚îÇ   ‚îú‚îÄ‚îÄ P√°ginas especializadas
‚îÇ   ‚îî‚îÄ‚îÄ Sistema de configura√ß√£o
‚îú‚îÄ‚îÄ Docker
‚îÇ   ‚îú‚îÄ‚îÄ Containeriza√ß√£o completa
‚îÇ   ‚îî‚îÄ‚îÄ Deploy simplificado
‚îî‚îÄ‚îÄ Scripts
    ‚îú‚îÄ‚îÄ Instala√ß√£o automatizada
    ‚îî‚îÄ‚îÄ Deploy e manuten√ß√£o
```

## üîß Pr√©-requisitos

### Sistema Operacional

-   **Linux**: Ubuntu 20.04+ (recomendado)
-   **macOS**: 10.15+
-   **Windows**: 10/11 com WSL2

### Software Necess√°rio

-   **Python**: 3.8 ou superior
-   **Node.js**: 16+ (opcional, para desenvolvimento)
-   **Docker**: 20.10+ (para deploy containerizado)
-   **Git**: Para clonagem do reposit√≥rio

### Depend√™ncias do Sistema

```bash
# Ubuntu/Debian
sudo apt update
sudo apt install -y ffmpeg tesseract-ocr tesseract-ocr-por tesseract-ocr-eng \
                    build-essential python3-dev python3-pip python3-venv \
                    libsndfile1 libsndfile1-dev

# macOS (com Homebrew)
brew install ffmpeg tesseract tesseract-lang

# CentOS/RHEL
sudo yum install -y epel-release
sudo yum install -y ffmpeg tesseract tesseract-langpack-por tesseract-langpack-eng
```

## üì¶ Instala√ß√£o

### 1. Clonagem do Reposit√≥rio

```bash
git clone https://github.com/seu-usuario/omnisia_web.git
cd omnisia_web
```

### 2. Configura√ß√£o do Ambiente

```bash
# Copia arquivo de configura√ß√£o
cp env.example .env

# Edita configura√ß√µes (veja se√ß√£o de Configura√ß√£o)
nano .env
```

### 3. Instala√ß√£o Autom√°tica

```bash
# Executa script de instala√ß√£o
chmod +x scripts/setup.sh
./scripts/setup.sh
```

### 4. Instala√ß√£o Manual

```bash
# Cria ambiente virtual
python3 -m venv .venv
source .venv/bin/activate

# Atualiza pip
pip install --upgrade pip

# Instala depend√™ncias
pip install -r requirements.txt

# Cria diret√≥rios necess√°rios
mkdir -p data/{uploads,models,datasets,logs}
```

## ‚öôÔ∏è Configura√ß√£o

### Arquivo .env

O sistema usa um arquivo `.env` para configura√ß√£o. Copie `env.example` para `.env` e ajuste:

#### Configura√ß√µes Essenciais

```bash
# API
API_HOST=0.0.0.0
API_PORT=8000
API_URL=http://localhost:8000

# Frontend
FRONTEND_HOST=0.0.0.0
FRONTEND_PORT=8501

# Upload
MAX_FILE_SIZE_MB=100
UPLOAD_DIR=data/uploads

# Modelos
WHISPER_MODEL_SIZE=base
EMBEDDING_MODEL=all-MiniLM-L6-v2

# Seguran√ßa
SECRET_KEY=sua-chave-secreta-aqui
```

#### Configura√ß√µes Avan√ßadas

```bash
# LoRA Training
LORA_R=16
LORA_ALPHA=32
LORA_DROPOUT=0.1
TRAINING_EPOCHS=3
TRAINING_BATCH_SIZE=4

# Cache e Performance
CACHE_ENABLED=true
CACHE_TTL=300
MAX_CONCURRENT_REQUESTS=5

# Logging
LOG_LEVEL=INFO
ENABLE_DEBUG=false
DEVELOPMENT_MODE=false
```

### Configura√ß√£o de Modelos

#### Modelos Whisper Dispon√≠veis

-   **tiny**: ~39MB, r√°pido, precis√£o baixa
-   **base**: ~74MB, balanceado (padr√£o)
-   **small**: ~244MB, boa precis√£o
-   **medium**: ~769MB, muito boa precis√£o
-   **large**: ~1550MB, excelente precis√£o

#### Modelos de Embedding

-   **all-MiniLM-L6-v2**: Leve e r√°pido (padr√£o)
-   **all-mpnet-base-v2**: Melhor qualidade
-   **all-MiniLM-L12-v2**: Intermedi√°rio

## üöÄ Execu√ß√£o

### Desenvolvimento Local

#### M√©todo 1: Scripts Autom√°ticos

```bash
# Inicia backend e frontend
./scripts/start.sh

# Ou separadamente:
./scripts/start_backend.sh
./scripts/start_frontend.sh
```

#### M√©todo 2: Manual

```bash
# Terminal 1 - Backend
source .venv/bin/activate
uvicorn backend.main:app --reload --host 0.0.0.0 --port 8000

# Terminal 2 - Frontend
source .venv/bin/activate
streamlit run frontend/app.py --server.port 8501
```

### Deploy com Docker

#### Docker Compose (Recomendado)

```bash
# Build e execu√ß√£o
docker-compose -f docker/docker-compose.yml up --build

# Em background
docker-compose -f docker/docker-compose.yml up -d --build
```

#### Docker Manual

```bash
# Backend
docker build -f docker/Dockerfile.backend -t omnisia-backend .
docker run -p 8000:8000 -v $(pwd)/data:/app/data omnisia-backend

# Frontend
docker build -f docker/Dockerfile.frontend -t omnisia-frontend .
docker run -p 8501:8501 omnisia-frontend
```

## üåê Acesso √† Aplica√ß√£o

Ap√≥s inicializa√ß√£o:

-   **Frontend**: http://localhost:8501
-   **Backend API**: http://localhost:8000
-   **Documenta√ß√£o API**: http://localhost:8000/docs
-   **Health Check**: http://localhost:8000/health

## üìö Funcionalidades

### 1. Upload de Arquivos

-   **Formatos suportados**: PDF, TXT, JPG, PNG, GIF, MP3, WAV, MP4, AVI, MOV
-   **Tamanho m√°ximo**: Configur√°vel (padr√£o 100MB)
-   **Valida√ß√£o autom√°tica**: Tipo e tamanho

### 2. Processamento OCR

-   **PDFs**: Extra√ß√£o de texto com OCR
-   **Imagens**: Reconhecimento de texto
-   **Idiomas**: Portugu√™s, Ingl√™s (configur√°vel)
-   **Pr√©-processamento**: Melhoria autom√°tica da imagem

### 3. Transcri√ß√£o de √Åudio/V√≠deo

-   **Modelos Whisper**: 5 tamanhos dispon√≠veis
-   **Formatos**: MP3, WAV, MP4, AVI, MOV
-   **Timestamps**: Suporte a marca√ß√£o temporal
-   **Detec√ß√£o de idioma**: Autom√°tica

### 4. Treinamento LoRA

-   **Modelos base**: GPT-2, DialoGPT
-   **Configura√ß√£o flex√≠vel**: Rank, alpha, dropout
-   **Monitoramento**: Logs detalhados
-   **Checkpoints**: Salvamento autom√°tico

### 5. Sistema de Chat

-   **Contexto inteligente**: Baseado em embeddings
-   **Busca sem√¢ntica**: Encontra informa√ß√µes relevantes
-   **Confian√ßa**: M√©tricas de qualidade
-   **Hist√≥rico**: Persistente por sess√£o

### 6. Dashboard

-   **M√©tricas do sistema**: Status, uptime, arquivos
-   **Monitoramento**: Cache, performance
-   **Arquivos recentes**: Listagem e gerenciamento
-   **Chat recente**: Hist√≥rico de conversas

## üîß Administra√ß√£o

### Logs

```bash
# Backend logs
tail -f logs/backend.log

# Frontend logs
tail -f logs/frontend.log

# Sistema logs
tail -f logs/omnisia.log
```

### Limpeza de Cache

```bash
# Via API
curl -X DELETE http://localhost:8000/chat/context

# Reinicializa√ß√£o
./scripts/restart.sh
```

### Backup

```bash
# Backup completo
./scripts/backup.sh

# Backup apenas dados
tar -czf backup_data_$(date +%Y%m%d).tar.gz data/
```

### Monitoramento

```bash
# Status dos servi√ßos
./scripts/status.sh

# M√©tricas de sistema
curl http://localhost:8000/health
```

## üêõ Solu√ß√£o de Problemas

### Problemas Comuns

#### 1. Erro de Depend√™ncias

```bash
# Reinstala depend√™ncias
pip install --upgrade -r requirements.txt

# Limpa cache pip
pip cache purge
```

#### 2. FFmpeg n√£o encontrado

```bash
# Ubuntu/Debian
sudo apt install ffmpeg

# macOS
brew install ffmpeg

# Verifica instala√ß√£o
ffmpeg -version
```

#### 3. Tesseract n√£o encontrado

```bash
# Ubuntu/Debian
sudo apt install tesseract-ocr tesseract-ocr-por

# Verifica idiomas
tesseract --list-langs
```

#### 4. Erro de Permiss√µes

```bash
# Corrige permiss√µes dos diret√≥rios
chmod -R 755 data/
chmod -R 755 logs/
```

#### 5. Porta em Uso

```bash
# Verifica processos usando as portas
lsof -i :8000
lsof -i :8501

# Mata processos se necess√°rio
kill -9 <PID>
```

### Logs de Debug

Para ativar logs detalhados:

```bash
# No .env
ENABLE_DEBUG=true
LOG_LEVEL=DEBUG
DEVELOPMENT_MODE=true
```

## üîí Seguran√ßa

### Configura√ß√µes de Produ√ß√£o

```bash
# .env para produ√ß√£o
DEVELOPMENT_MODE=false
ENABLE_DEBUG=false
SECRET_KEY=chave-super-secreta-complexa
ALLOWED_HOSTS=seu-dominio.com,localhost
```

### Firewall

```bash
# Ubuntu/Debian
sudo ufw allow 8000/tcp
sudo ufw allow 8501/tcp
sudo ufw enable
```

### SSL/HTTPS

Para produ√ß√£o, use um proxy reverso (nginx) com SSL:

```nginx
server {
    listen 443 ssl;
    server_name seu-dominio.com;

    location / {
        proxy_pass http://localhost:8501;
    }

    location /api {
        proxy_pass http://localhost:8000;
    }
}
```

## üìä Performance

### Otimiza√ß√µes Recomendadas

#### Hardware

-   **CPU**: 4+ cores para processamento paralelo
-   **RAM**: 8GB+ (16GB+ para modelos grandes)
-   **GPU**: CUDA compat√≠vel (opcional, para acelera√ß√£o)
-   **Storage**: SSD para melhor I/O

#### Software

```bash
# Cache de modelos
CACHE_ENABLED=true
HUGGINGFACE_CACHE_DIR=data/huggingface_cache

# Processamento paralelo
MAX_CONCURRENT_REQUESTS=5
```

### Monitoramento de Recursos

```bash
# CPU e mem√≥ria
htop

# Espa√ßo em disco
df -h

# Uso de GPU (se dispon√≠vel)
nvidia-smi
```

## üîÑ Atualiza√ß√µes

### Atualiza√ß√£o do Sistema

```bash
# Pull das mudan√ßas
git pull origin main

# Atualiza depend√™ncias
pip install --upgrade -r requirements.txt

# Reinicia servi√ßos
./scripts/restart.sh
```

### Migra√ß√£o de Dados

```bash
# Backup antes da atualiza√ß√£o
./scripts/backup.sh

# Migra√ß√£o de configura√ß√£o
./scripts/migrate_config.sh
```

## üìû Suporte

### Documenta√ß√£o

-   **API Docs**: http://localhost:8000/docs
-   **Configura√ß√£o**: [CONFIGURATION.md](frontend/CONFIGURATION.md)
-   **Exemplos**: [examples/](examples/)

### Contato

-   **Autor**: Roberto Dantas de Castro
-   **Email**: robertodantasdecastro@gmail.com
-   **GitHub**: [Issues](https://github.com/seu-usuario/omnisia_web/issues)

### Logs para Suporte

Ao reportar problemas, inclua:

```bash
# Informa√ß√µes do sistema
./scripts/system_info.sh > system_info.txt

# Logs relevantes
tail -n 100 logs/backend.log > backend_logs.txt
tail -n 100 logs/frontend.log > frontend_logs.txt
```

---

## üìù Notas de Vers√£o

### v1.0.0 (2024-01-01)

-   ‚úÖ Sistema completo de upload e processamento
-   ‚úÖ OCR para PDFs e imagens
-   ‚úÖ Transcri√ß√£o de √°udio/v√≠deo com Whisper
-   ‚úÖ Treinamento LoRA
-   ‚úÖ Sistema de chat com embeddings
-   ‚úÖ Interface web completa
-   ‚úÖ Containeriza√ß√£o Docker
-   ‚úÖ Sistema de configura√ß√£o centralizado

---

**üéâ OmnisIA Trainer Web est√° pronto para uso!**

Para come√ßar rapidamente:

1. Execute `./scripts/setup.sh`
2. Configure o arquivo `.env`
3. Execute `./scripts/start.sh`
4. Acesse http://localhost:8501

Boa sorte com seu projeto de IA! üöÄ
